
[core]
name: shield_laser_defenseGen
copyFrom: common_slot.ini

displayText: Turtle Core
displayDescription: [Defense\Support Module]\n-Shield generation Module\n-Disintegrates incoming projectiles \nbefore they hits neaby units\n-Generates Hp when energy is full |40 hp\sec|\n--------------------------\n-When Install provides 500 starting shield\nNote: Removing Module -500 shield
displayText_ru: Черепашье Ядро
displayDescription_ru: [ Модуль поддержки и защиты ] \n Работает как генератор щита и лазерная защита вместе взятые \n - Когда энергия полна, восстанавливает единицы щита со скоростью 40 в сек. \n Примечание: \n При установке мгновенно дает 500 единиц щита и при удалении забирает обратно
displayText_zh: 龟核
displayDescription_zh: [防御\支援模块]\n-护盾生成模块\n-在来袭炮弹击中附近单位之前分解来袭炮弹\n-在能量充足时恢复耐久| 40耐久\秒| \n-----------------------------------\n-安装时提供500启动护盾\n注意：移除模块-500护盾
price: ${Mprice_VII}

energyMax: 1
energyRegen: 0.0003

generation_resources: energy=0.0009
generation_active: if self.hasFlag(id=10) and self.hasFlag(id=11)
generation_delay: 1
#===================================================================================================



tags: module+

[action_passive]
displayType: infoOnlyNoBox
isVisible: true
buildSpeed: 0s
textAddUnitName: ${core.name}
descriptionAddFromUnit: ${core.name} 
descriptionAddUnitStats: ${core.name} 
iconImage: shieldGen.png
pos: 10
price: energy=0.1
addResources: energy=0.1
displayRemainingStockpile: true
[action_T1]

displayType: infoOnlyNoBox
text: Turtle Core T1
description: Ora!!! 
text_ru: Черепашье Ядро I
description_ru: - Восстанавливает щит и здоровье, а также даёт лаз. защиту
text_zh: 龟核 T1
description_zh: 欧拉!!! 
isVisible: if not self.hasFlag(id=10) and not self.hasFlag(id=11) or not self.hasFlag(id=11)
buildSpeed: 0s
pos: 10

[action_T2]
@copyFromSection: action_T1
text: [ Turtle Core T2 ]
description:  +30% Shield generation\n+0.01 energy/tick
text_ru: [ Черепашье Ядро II ]
description_ru: - Улучшает генерацию щита на 30% и прирост энергии на 0.01 в сек.
text_zh: [ 龟核 T2 ]
description_zh:  +30%护盾生成\n+0.01能量/滴答声

isVisible: if self.hasFlag(id=11) and not self.hasFlag(id=10)

[action_T3]
@copyFromSection: action_T1
text: [ Turtle Core T3 ]
description: +70% Shield generation \n+200% Energy generation\n2x hp regen
text_ru: [ Черепашье Ядро III ]
description_ru: - Улучшает генерацию щита на 40%, прирост энергии и регенерацию ОЗ на 200%
text_zh: [ 龟核 T3 ]
description_zh:- +70%的护盾产生\n- +200%的能量产生\n-2倍耐久再生

isVisible: if self.hasFlag(id=11) and self.hasFlag(id=10)

[hiddenAction_regen]
autoTrigger: true
requireConditional: if not self.hasFlag(id=10) and not self.hasFlag(id=11) or not self.hasFlag(id=11)
#30 / 60 = 0.5 per tick
takeResources: shield=-30
takeResources_includeParent: true
takeResources_discardCollected: true

alsoTriggerAction: Hp

[hiddenAction_regenII]
@copyFromSection:hiddenAction_regen
requireConditional: if self.hasFlag(id=11) and not self.hasFlag(id=10)
takeResources: shield=-39
addResources: energy=0.01

alsoTriggerAction: Hpa
[hiddenAction_regenIII]
@copyFromSection:hiddenAction_regen 
requireConditional: if self.hasFlag(id=10) and self.hasFlag(id=11)
takeResources: shield=-55
alsoTriggerAction: HpII

[hiddenAction_Hp]
requireConditional: if self.isEnergyFull() and not self.hasFlag(id=10) and not self.hasFlag(id=11)
takeResources: hp=-40
takeResources_includeParent: true
takeResources_discardCollected: true

[hiddenAction_Hpa]
requireConditional: if self.isEnergyFull() and self.hasFlag(id=11) and not self.hasFlag(id=10)
takeResources: hp=-40
takeResources_includeParent: true
takeResources_discardCollected: true

[hiddenAction_HpII]
@copyFromSection:hiddenAction_Hp
requireConditional: if self.isEnergyFull() and self.hasFlag(id=10) and self.hasFlag(id=11)
takeResources: hp=-80


[action_UpgradeI]
isActive: if self.queueSize(empty=true)
isVisible: if not self.hasFlag(id=11)

text: Upgrade I
description: Upgrade shield generation by 30%\n+0.01 energy/tick
text_ru: Улучшение I
description_ru: - Улучшает генерацию щита на 30% и прирост энергии на 0.01 в сек.
text_zh: 升级 I
description_zh:- +30%护盾生成\n+0.01能量/滴答声

iconImage: ROOT:data\icons\module_shieldUpS.png
iconExtraImage: ROOT:data\icons\icon_upgrade_topII.png
iconExtraColor: #FFFFFFFF

price: 1700
addResources: setFlag=11
buildSpeed: 10s
playSoundAtUnit: ROOT:data\soundFx\interface_instal2.ogg
pos: 0.2
spawnEffects: CUSTOM:ShieldParticle*5,CUSTOM:ShieldParticle2*5,CUSTOM:shieldwave,CUSTOM:Light


#iconExtraImage: ROOT:data\icons\icon_upgrade_topII.png
iconExtraIsVisible: true
[action_UpgradeII]
@copyFromSection: action_UpgradeI
isVisible: if self.hasFlag(id=11) and not self.hasFlag(id=10)

text: Upgrade II
description: Upgrade shield generation by 40%\nand 200% energy generation\n2x hp regen
text_ru: Улучшение II
description_ru: - Улучшает генерацию щита на 40%, прирост энергии и регенерацию ОЗ на 200%
text_zh: 升级 II
description_zh:- +70%的护盾产生\n- +200%的能量产生\n-2倍耐久再生

iconExtraImage: ROOT:data\icons\icon_upgrade_topIII.png

price: 2700
addResources:  setFlag=10
buildSpeed: 20s


#iconExtraImage: ROOT:data\icons\icon_upgrade_topII.png
iconExtraIsVisible: true
#===================================================================================================

[action_reclaim]
takeResources: shield=500
takeResources_includeParent: true
takeResources_discardCollected: true
description: -Free up slot for another module type.\n-Refund ${Mprice_VII*0.5} credits
description_ru: - Освободить слот для другого модуля\n- Вернёт ${Mprice_VII*0.5} ресурсов.
description_zh:-为其他模块类型释放空间\n-退款${Mprice_VII*0.5}资金

addResources: credits=${Mprice_VII*0.5}
[graphics]
showEnergyBar: false
#isVisible: if not self.hasParent()
image:        SHARED:blank.png


image_shadow: NONE
shadowOffsetX:3
shadowOffsetY:3

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 30
turretTurnSpeed: 2
#maxAttackRange: 200
shootDelay: 85

[turret_1]
#dummy
x: 0
y: 0

size: 0
turnSpeed: 2
canShoot: false

idleSweepAddRandomAngle:150
idleSweepAngle:40
idleSweepDelay:100
idleSweepAddRandomDelay: 100
idleSweepSpeed:2
[turret_def]
x: 0
y: 30
invisible: if not self.hasParent()
attachedTo: 1
slave: false
image: turtle.png
canShoot: false
laserDefenceEnergyUse: 0.5
limitingRange: 160
size:1

idleSweepAddRandomAngle:150
idleSweepAngle:140
idleSweepDelay:20
idleSweepAddRandomDelay: 60
idleSweepSpeed:4

[arm_1]
x:0
y:0
endDirOffset: -90
image_end:turtle.png
drawOverBody: true
hidden:if self.hasParent()
image_end_teamColors: true


