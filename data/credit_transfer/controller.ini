[core]
copyFrom: null.template
name: CT_controller

showInEditor: false

displayText: Controller
onNewMapSpawn: mapCenter_asNeutral
stayNeutral: true
tags: CT_controller

autoTriggerCooldownTime: 0.001s
autoTriggerCooldownTime_allowDangerousHighCPU: true

defineUnitMemory: unit rf0, unit rf1, unit rf2, unit rf3,  unit rf4, unit rf5, unit rf6, unit rf7, unit rf8, unit rf9, unit last_received

[hiddenAction_receive]
autoTriggerOnEvent: newMessage(withTag="donator")
setUnitMemory: last_received=eventData(name="donator", type="unit")
addResources: setFlag=0
alsoTriggerAction: a0, a1, a2, a3, a4, a5, a6, a7, a8, a9


[hiddenAction_a0]
@define id: 0
requireConditional: if memory.last_received.teamId() == ${id}
setUnitMemory: rf${id}=memory.last_received

[hiddenAction_a1]
@copyFromSection: hiddenAction_a0
@define id: 1

[hiddenAction_a2]
@copyFromSection: hiddenAction_a0
@define id: 2

[hiddenAction_a3]
@copyFromSection: hiddenAction_a0
@define id: 3

[hiddenAction_a4]
@copyFromSection: hiddenAction_a0
@define id: 4

[hiddenAction_a5]
@copyFromSection: hiddenAction_a0
@define id: 5

[hiddenAction_a6]
@copyFromSection: hiddenAction_a0
@define id: 6

[hiddenAction_a7]
@copyFromSection: hiddenAction_a0
@define id: 7

[hiddenAction_a8]
@copyFromSection: hiddenAction_a0
@define id: 8

[hiddenAction_a9]
@copyFromSection: hiddenAction_a0
@define id: 9


[hiddenAction_send]
autoTrigger: if self.hasFlag(id=0) and self.timeAlive() >= 1
alsoTriggerAction: s0, s1, s2, s3, s4, s5, s6, s7, s8, s9
addResources: unsetFlag=0


[hiddenAction_s0]
@define id: 0
requireConditional: if memory.rf${id} != null
sendMessageTo: memory.rf${id}
sendMessageWithTags: donators
sendMessageWithData: rf0=memory.rf9, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s1]
@copyFromSection: hiddenAction_s0
@define id: 1
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf9, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s2]
@copyFromSection: hiddenAction_s0
@define id: 2
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf9, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s3]
@copyFromSection: hiddenAction_s0
@define id: 3
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf9, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s4]
@copyFromSection: hiddenAction_s0
@define id: 4
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf9, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s5]
@copyFromSection: hiddenAction_s0
@define id: 5
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf9, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s6]
@copyFromSection: hiddenAction_s0
@define id: 6
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf9, rf7=memory.rf7, rf8=memory.rf8

[hiddenAction_s7]
@copyFromSection: hiddenAction_s0
@define id: 7
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf9, rf8=memory.rf8

[hiddenAction_s8]
@copyFromSection: hiddenAction_s0
@define id: 8
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf9

[hiddenAction_s9]
@copyFromSection: hiddenAction_s0
@define id: 9
sendMessageWithData: rf0=memory.rf0, rf1=memory.rf1, rf2=memory.rf2, rf3=memory.rf3, rf4=memory.rf4, rf5=memory.rf5, rf6=memory.rf6, rf7=memory.rf7, rf8=memory.rf8


[graphics]
showQueueBar: false
