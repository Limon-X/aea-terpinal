
[core]
copyFrom: ROOT:effects.template
name: nai_bomber
displayText: Nightmare Bomber
displayDescription: - Heavily armed and armoured bomber\n- Slow but tanky\n- Drops 3 bombs then has to reload\n- Can hit subs (at half damage)
displayText_ru: Бомбардировщик
displayDescription_ru: - Тяжеловооружённое и бронированное воздушное судно\n- Медлителен, но имеет большое количество ОЗ\n- За раз выпускает 3 бомбы и затем перезаряжается\n- Атакует наземные и подводные цели. (Подводные цели получает вдвое сниженный урон)\n- Можно иметь не более 200
displayText_es: Bombardero
displayDescription_es: -Bombardero fuertemente armado y blindado\n-Lento, pero resistente\n-Suelta 3 bombas pero debe recargar\n-Puede atacar submarinos (inflige la mitad del daño)
displayText_zh: 轰炸机
displayDescription_zh: -全副武装的装甲轰炸机\n-速度慢但硬度高\n- 投下 3 枚炸弹然后必须重新装填\n- 有反潜的能力（但是伤害减半）
displayText_zh_cn:轰炸机
displayDescription_zh_cn: -重型轰炸机\n- 速度慢但强度大\n- 投下 3 枚炸弹然后必须重新装填\n- 可以攻击潜艇（伤害减半）

class: CustomUnitMetadata
price: 5
maxHp: 3000
mass: 20000

techLevel: 2
buildSpeed: 1s
availableInDemo: true
showInEditor: false
fogOfWarSightRange: 14
radius: 16
displayRadius: 19
isBio: false
#softCollisionOnAll: 3
softCollisionOnAll:24

tags: bomber

selfRegenRate:0.1

energyMax: 3
energyRegen: 0.006
energyNeedsToRechargeToFull: true
[graphics]
total_frames: 1

image:        ROOT:_AEA_/Air/bomber/base.png
image_wreak:  ROOT:_AEA_/Air/bomber/base_dead.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect:CUSTOM:trailbomber
movementEffectRate: 1

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true

turretSize: 20
turretTurnSpeed: 1.5

maxAttackRange: 45
shootDelay: 30

attackMovement: bomber



[turret_1]
#bomber
invisible: true
x: 0
y: 0
idleDir:0
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false


projectile: 1
size: 1.1
turnSpeed: 20

energyUsage: 1


[projectile_1]
#bomb

#cannot use directDamage with targetGround
#directDamage: 195

life: 250
speed: 0.3
targetSpeed: 1.7
drawSize: 1
color: #000000
trailEffect: false
largeHitEffect: true

targetGround: true

areaDamage: 370
areaRadius: 65

#for laser defence
deflectionPower: 3

tags:ifc
spawnUnit: explodeSFX

explodeEffect: CUSTOM:lightGround, smallExplosion



[turret_2]
#anti-sub
invisible: true
x: 0
y: 0
idleDir:0
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: true

projectile: 2
size: 1.1
turnSpeed: 20

energyUsage: 1



[projectile_2]
#bomb anti-sub

areaDamage: 185
areaRadius: 65

life: 250
speed: 0.3
targetSpeed: 1.7
drawSize: 1
color: #000000
trailEffect: false
largeHitEffect: false

targetGround: false

#for laser defence
deflectionPower: 3


#effects

[effect_dirtyExplosion]
life:0
alsoEmitEffects: CUSTOM:lightGround, CUSTOM:dirt, shockwave, CUSTOM:dirtySmoke, smallExplosion
createWhenOverLiquid: false

[effect_waterSplash]
life:0
alsoEmitEffects: CUSTOM:wave, CUSTOM:waterSplash1, CUSTOM:waterSplash2, CUSTOM:waterSplash3, CUSTOM:waterSplash4*3, CUSTOM:waterSplash5*5

[effect_missileFlare1]
life: 10
lifeRandom: 5
spawnChance: 0.25
alwayStartDirAtZero: true
ifSpawnFailsEmitEffects: CUSTOM:missileFlare2
image: ROOT:shared/yellow_flare.png
yOffsetRelative: -3.5
@define missileFlareSize: 0.1
scaleFrom: ${missileFlareSize}
scaleTo: ${missileFlareSize}


[movement]
movementType: AIR
moveSpeed: 0.85
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

landOnGround: onlyIdle


#note: joinsGroupFormations=false could case slowdowns for groups of non-flying units
joinsGroupFormations: false

maxTurnSpeed: 1.2
turnAcceleration: 0.04

moveSlidingMode :false
moveIgnoringBody:false
moveSlidingDir:  25

slowDeathFall: true

#                                                       nightmare ai
[hiddenAction_penalty]
autoTriggerOnEvent: tookDamage()
requireConditional: if not self.tags(includes='AirTransportPenalty') and not self.tags(includes='Shocked')
setUnitStats: moveSpeed=${movement.moveSpeed}*3
temporarilyAddTags: AirTransportPenalty

[hiddenAction_DebuffconcusDeactivate]
autoTrigger: if not self.hasTakenDamage(withinSeconds=1)
requireConditional: if self.tags(includes='AirTransportPenalty') and not self.tags(includes='Shocked')
setUnitStats: moveSpeed=${movement.moveSpeed}
temporarilyRemoveTags: AirTransportPenalty


[hiddenAction_nai_rush1]
autoTriggerOnEvent: created
temporarilyAddTags: nai_ilikeextractors
[hiddenAction_nai_attack]
autoTrigger: if self.tags(includes="nai_ilikeextractors")
clearAllWaypoints: true
addWaypoint_type: attack
addWaypoint_target_nearestUnit_tagged: credfactory, GeneratorL, extractor, bgcExtractor, fabricator
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_triggerActionIfFailed: nai_attackFailed
[hiddenAction_nai_attackFailed]
temporarilyRemoveTags: nai_ilikeextractors
clearAllWaypoints: true


