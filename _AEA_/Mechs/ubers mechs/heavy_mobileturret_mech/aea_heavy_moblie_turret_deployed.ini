
[core]
name: heavyMobileTurretDeployed
class: CustomUnitMetadata
copyFrom: ROOT:effects.template,



displayText: Heavy Mobile Turret
displayDescription: -Heavily armored\n-Ground attack when undeployed\n-Deploys for extra range, anti-air and shield regen\n-Cannot attack while undeploying\n-Can release a repairing nano-burst when deployed

displayText_es: Torreta Móvil Pesada
displayDescription_es: -Fuertemente blidada\n-Puede atacar a tierra\n-Obtiene mayor rango, ataque antiaéreo y regenera su escudo al desplegarse\n-No puede atacar mientras se repliega\n-Puede liberar nano-ráfagas reparadoras al desplegarse

displayText_ru: Смехоход турель тяжёлая 
displayDescription_ru: - Жирный \n Развёртывается для получение щита и увеличения радиуса атаки \n Неплохой ДПС \n Нано-взрыв как способность в развёрнутом состоянии 
displayText_zh:移动大型炮塔
displayDescription_zh: -强大的防护能力\n-未部署时只能攻击地面目标\n-部署以获得额外的射程、防空能力和护盾系统\n-部署的过程无法攻击\n-在部署后可以释放纳米恢复

showInEditor: false

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint:-1,-1,1,1

#buildingToFootprintOffsetX:20
#buildingToFootprintOffsetY:20

maxShield: 800
shieldRegen: 0.275

startShieldAtZero: true

isBuilding: true
price: 7500
maxHp: 3000
mass: 15000

#mass: 3000 (tank)
#mass: 80000 (exp tank)

techLevel: 2
buildSpeed: 43.8s
#availableInDemo: true

fogOfWarSightRange: 20
#do this part

transportSlotsNeeded: 3

radius: 28
isBio: false
softCollisionOnAll: 0
[hiddenAction_aiunDeploy]
autoTrigger: if self.isControlledByAI() and self.numberOfUnitsInEnemyTeam(lessThan=1, withinRange=310)
alsoQueueAction: undeploy
[hiddenAction_aiSquadHealing]
autoTrigger: if self.hp(lessThan=1000) and self.isControlledByAI()
requireConditional: if self.customTimer(laterThanSeconds=60)
alsoQueueAction: areaHeal, areaHealMid

[action_undeploy]
ai_isDisabled: true
isVisible: true
text: Undeploy
text_zh: 取消部署
text_ru: Развернуть
convertTo: heavyMobileTurret
displayType: upgrade
buildSpeed: 2.4s
#canPlayerCancel: false

[action_deploy]
isVisible:false

[action_areaHeal]
displayType: action
iconImage: ROOT:shared/nanoBurstIcon.png
text: Nano Burst
description: -Releases 3 healing bursts that repair units for 200HP each\n-Healing depends on distance from the unit\n-Cannot repair shields
text_ru: Нано-Взрыв
description_ru: - Выпускает 3 потока наномашин, лечащих по 200 ОЗ. \n - Эффективность лечения зависит от дальности нахождения юнитов. 
text_es: Nano-ráfaga
description_es: -Libera 3 ráfagas reparadoras que curan hasta 200PV de las unidades cercanas\n-La curación depende de la distancia a la unidad\n-No puede reparar escudos
text_zh: 纳米冲击
description_zh: -释放3次治疗脉冲，每次可修复附近单位200的耐久\n治疗效果取决于离移动炮塔的距离，无法修复护盾

buildSpeed: 1s
#price: energy=1
fireTurretXAtGround: heal
fireTurretXAtGround_withOffset: 0,0
isLocked: if not self.customTimer(laterThanSeconds=60)
isLockedMessage: Cooldown
#addResources: setFlag=1
resetCustomTimer: true

canPlayerCancel: false

#isActive: if not self.hasFlag(id=3)

spawnEffects: CUSTOM:powerAura, CUSTOM:powerAura2
allowMultipleInQueue: false
#alsoQueueAction: reenableTurrets

[action_areaHealMid]
displayType: action
isVisible: false
text: Nano Burst (Second burst)
description: -
text_ru: Нано-Взрыв (Второй поток)
description_ru: 

buildSpeed: 0s
price: hp=300
fireTurretXAtGround: heal
fireTurretXAtGround_withOffset: 0,0

autoTrigger: if self.customTimer(laterThanSeconds=1.5) and not self.hasFlag(id=2) and self.hasFlag(id=1) or self.customTimer(laterThanSeconds=3) and self.customTimer(withinSeconds=3.1) and self.hasFlag(id=2)

addResources: setFlag=2

canPlayerCancel: false

[graphics]
total_frames: 1

image:        body.png
image_wreak:  NONE

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3
#imageScale: 1.1
teamColorsOnTurret: true

#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6

[action_reenableTurrets]
displayType: action
isVisible: false
text: Reenable Turrets
description: -Disables flag to let unit fire and undeploy
text_ru: Активация Турелей...
description_ru:

buildSpeed: 9s
price: 0

addResources: unsetFlag=1, unsetFlag=2

resetCustomTimer: true

canPlayerCancel: false

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 19
turretTurnSpeed: 3

maxAttackRange: 310
shootDelay: 220
turretMultiTargeting:true
turretRotateWithBody: true


[turret_2]
#cannon front
x: -5
y: 10
attachedTo: 1
slave: true
invisible: false
projectile: 1
image: head_barrel.png
turnSpeed: 4
turnSpeedAcceleration: 1.0

shoot_sound:large_gun_fire1
shoot_sound_vol:0.2
shoot_flame:large

shoot_light:#FFEECCCC
canShoot: true

delay:1.2s

size: 26
recoilOffset: -6
recoilOutTime: 8
recoilReturnTime: 40

canAttackFlyingUnits: false
canAttackLandUnits:   true

[turret_2B]
#
copyFrom: 2
invisible: false
x: 5
y: 10
linkDelayWithTurret:2
warmup:0.5s

[turret_1]
x: 0
y: 0
idleDir:0
turnSpeed: 1.5
turnSpeedAcceleration: 0.05
canShoot: false
recoilOffset: -1.5
recoilOutTime: 4
recoilReturnTime: 6
canAttackFlyingUnits: false
canAttackLandUnits: true

image:head_turret.png

[turret_anti_air]
#
x: 3
y: -10
attachedTo: 1
slave: false
projectile: aa
image: anti_air.png
turnSpeedAcceleration: 1.0
shoot_sound: missile_fire
shoot_sound_vol:0.3
shoot_flame: CUSTOM:missileShockwave, CUSTOM:smoke*3
shoot_light:#FFffebbc

size: 8
canShoot: true
delay: 0.5s

recoilOffset: -4
recoilOutTime: 6
recoilReturnTime: 10
idleDir:45

canAttackFlyingUnits: true
canAttackLandUnits: false

[projectile_cann]
life: 280
speed: 12
lightSize:0.5
lightColor:#FFDA55
drawSize: 1
image:O_Bv3.png
explodeOnEndOfLife:true
areaDamage: 120
areaRadius: 60

[projectile_1]
directDamage: 95
areaDamage: 30
areaRadius: 75
life: 70
speed: 10

frame: 2
trailEffect: true
trailEffectRate: 2
largeHitEffect: true

drawSize: 0.9

effectOnCreate: CUSTOM:smoke*3

[projectile_2]
#dummy projectile
directDamage: 0
life: 0
speed: 0

image: NONE
trailEffect: true
largeHitEffect: true

drawSize: 0

[projectile_aa]
#missile
directDamage: 35
areaDamage: 30
areaRadius: 75
life: 160
speed: 1
targetSpeed: 8

frame: 4
drawSize: 0.9

trailEffect: true
largeHitEffect: true

lightColor: #f7ff1d
lightSize: 0.5

[turret_heal]
#area heal turret
x: 0
y: 0

invisible: true

limitingRange: 220

canAttackFlyingUnits: false
canAttackLandUnits: false
canAttackUnderwaterUnits: false

#onShoot_playAnimation:

projectile: heal

turnSpeed: 5.0
#turnSpeedAcceleration: 1.5

shoot_sound:NONE
shoot_sound_vol:0.5
#shoot_flame:CUSTOM:sparks2*3, CUSTOM:lightSlowFade
shoot_flame:NONE

canShoot: true

size: 0

delay: 0

warmup:0

#chargeEffectImage: SHARED:lighting_charge2.png


[projectile_heal]
#healing burst
areaDamage: -200
areaRadius: 220

targetGround: true

areaExpandTime: 90
areaHitAirAndLandAtSameTime: true

speed: 0

life: 0
instant: false
largeHitEffect: true

explodeOnEndOfLife: true

deflectionPower: -1

shieldDamageMultiplier: 0
buildingDamageMultiplier: 0.1

friendlyFire: only-ignoreEnemy

explodeEffect: CUSTOM:areaHeal, CUSTOM:healLights, CUSTOM:healSparks*14, CUSTOM:healBodyLight

[comment_turret_anti_air]
x: 3
y: -10

[comment_projectile_cann]
areaDamage: 200
areaRadius: 60

[leg_1]
x: -8
y: 16
attach_x: -8
attach_y: 16
moveSpeed: 2.1
rotateSpeed: 7
heightSpeed: 1
resetAngle:25
image_leg:  leg.png
image_foot: foot_small.png
holdDisMin: 8
holdDisMax: 12
hardLimit: 50
estimatingPositionMultiplier:0.85
holdDisMin_maxMovingLegs:1

[leg_2]
x: 8
y: 16
attach_x: 8
attach_y: 16
copyFrom: 1

[leg_3]
x: -8
y: 0
attach_x: -8
attach_y: 0
copyFrom: 1

[leg_4]
x: 8
y: 0
attach_x: 8
attach_y: 0
copyFrom: 1

[leg_5]
x: -8
y: -16
attach_x: -8
attach_y: -16
copyFrom: 1

[leg_6]
x: 16
y: -8
attach_x: 8
attach_y: -16
copyFrom: 1

[movement]
movementType: NONE

targetHeight:0

moveSpeed: 0
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


reverseSpeedPercentage:1



[ai]
buildPriority:0.1
maxEachBase:1
upgradedFrom: heavyMobileTurret
